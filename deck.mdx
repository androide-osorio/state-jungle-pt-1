import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { SlideLayout, SurferLayout } from "./js/layout";
import dracula, { veganDracula, styles } from "./js/theme";
import "./styles/font-face.css"

export const theme = dracula;

<SlideLayout style={styles.heroSlide}>

# Welcome to the state jungle, Pt.1

<br />

<div style={{ textAlign: "right" }}>
  AndrÃ©s Osorio
</div>

</SlideLayout>

--------

<SlideLayout>

## Remember this?

[https://koogv.sse.codesandbox.io/0](https://koogv.sse.codesandbox.io/0)

</SlideLayout>

--------

<SlideLayout style={styles.heroSlide}>

![Rabbit hole](https://media.giphy.com/media/3o6fJgEOrF1lky8WFa/giphy.gif?cid=ecf05e47qi385euqxbhavu22gd29tql3b2fuzhlmfxl0yfpu&rid=giphy.gif&ct=g)

This effectively sent me through a murky Rabbit hole. It had me asking...

</SlideLayout>

---------

<SlideLayout>

## How do you even manage state in 2021?

</SlideLayout>

---------

<SlideLayout>

## Back in my day (and maybe yours too)...

![Redux](https://redux.js.org/img/redux-logo-landscape.png)

He was the winner ðŸ‘†. Everyone and their grandmothers adopted it. It was a revolution.

</SlideLayout>

-----------

<SlideLayout>

## But why?

</SlideLayout>

-----------

<SurferLayout>

<CodeSurferColumns themes={[veganDracula, veganDracula]} sizes={[1,1]}>

<Step>

<SlideLayout>

### 1. A single source of truth

Translated into a single store for state. It's easy to manage and reason about, and it's just a plain Javascript object.

</SlideLayout>

```jsx
// everything is here. EVERY THING!
const initialState = {
  user: {
    firstName: "...",
    lastName: "..."
  },
  questions: [
    { id: "tn13q4g4p1894tu", ... },
    { id: "lkj34tu98058t45", ... },
  ]
}
```

</Step>

<Step>

<SlideLayout>

## 2. Modularity is achieved through composition

The nice thing about it is that it's just plain-old simple function composition. It's a great way to modularize a big single store that would otherwise be unmanageable.

</SlideLayout>

```jsx
import { createStore } from 'redux'

// everything is here. EVERY THING!
const initialState = {
  user: {
    firstName: "...",
    lastName: "..."
  },
  questions: [
    { id: "tn13q4g4p1894tu", ... },
    { id: "lkj34tu98058t45", ... },
  ]
}

const userReducer = (state = {}, action) => {
  //...
}

const questionsReducer = (state = {}, action) => {

}

const rootReducer = combineReducers({
  users: userReducer,
  questions: questionsReducer,
  ...
});

const store = createStore(rootReducer)
```

</Step>

<Step>

<SlideLayout>

## 3. Predictable updates

Every observer of a certain portion of the state is only notified once the state has been fully updated.

</SlideLayout>

```jsx
import React from 'react'
import { createStore } from 'redux'
import { useSelector, useDispatch } from 'react-redux'

// everything is here. EVERY THING!
const initialState = {
  user: {
    firstName: "...",
    lastName: "..."
  },
  questions: [
    { id: "tn13q4g4p1894tu", ... },
    { id: "lkj34tu98058t45", ... },
  ]
}

const userReducer = (state = {}, action) => {
  //...
}

const questionsReducer = (state = {}, action) => {

}

const rootReducer = combineReducers({
  users: userReducer,
  questions: questionsReducer,
  ...
});

const store = createStore(rootReducer)

const MyComponent = () => {
  // only gets rerendered AFTER user's first name is updated
  const myFirstName = useSelector(state => state.user.firstName);

  return (
    <h1>I am {myFirstName}</h1>
  )
}
```

</Step>

</CodeSurferColumns>

</SurferLayout>

------------------

<SlideLayout>

### So, problem solved, right?...

<img src="https://external-preview.redd.it/E6nPCv7F8_oujVdddPvWNTvv27763pq9fk7h2b6JaRw.jpg?auto=webp&s=41feae0f5299bfc49aadc00fa1b7855cb93f0464" width="400px" />

</SlideLayout>

------------------

<SlideLayout>


</SlideLayout>